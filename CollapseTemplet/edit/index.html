<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- 引入样式 -->
    <link rel="stylesheet" href="../../node_modules/element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" type="text/css" href="templet.css">
</head>
<body>
<div id="app">

    <!-- templetView 为模板主视图区域 -->
    <section id="templetView" v-show="viewModel.display">

        <!-- 显示工具栏按钮（工具栏隐藏时显示） -->
        <transition name="el-zoom-in-center">
            <i v-show="!viewModel.toolbar.display" class="el-icon-d-arrow-right show-toolbar-icon" title="显示工具栏"
               @click="viewModel.toolbar.display = true"></i>
        </transition>

        <!-- 工具栏 -->
        <transition name="el-zoom-in-top">
            <el-card v-show="viewModel.toolbar.display" :body-style="{ padding: '5px'}">
                <el-button-group>
                    <el-button type="primary" :size="viewModel.size" round>新增</el-button>
                    <el-button type="primary" :size="viewModel.size">修改</el-button>
                    <el-button type="warning" :size="viewModel.size" round>保存</el-button>
                    <el-button type="success" :size="viewModel.size" round>刷新</el-button>
                    <el-button type="danger" :size="viewModel.size" round>删除</el-button>
                </el-button-group>

                <el-dropdown class="right" round @command="handleSettings">
                    <el-button type="primary" :size="viewModel.size" title="设置">
                        设置 <i class="el-icon-caret-bottom el-icon--right"></i>
                    </el-button>
                    <el-dropdown-menu slot="dropdown">
                        <el-dropdown-item command="VIEW_SETING">界面设置</el-dropdown-item>
                        <el-dropdown-item command="COLUMN_SETTINGS">表体显示</el-dropdown-item>
                        <el-dropdown-item command="COLUMN_SETTINGS">表尾显示</el-dropdown-item>
                    </el-dropdown-menu>
                </el-dropdown>

                <el-button-group class="right" style="margin-right: 10px;">
                    <el-button type="primary" :size="viewModel.size">按钮1</el-button>
                    <el-button type="primary" :size="viewModel.size">按钮2</el-button>
                </el-button-group>
            </el-card>
        </transition>

        <el-card :body-style="{ padding: '0px'}">
            <el-collapse v-model="viewModel.collapseModel.value"
                     :accordion="viewModel.collapseModel.accordion"
                     :value="viewModel.collapseModel.value"
                     @change="viewModel.collapseModel.events.change">

                <el-collapse-item v-for="(collapseItem, $itemIndex) in viewModel.collapseModel.items"
                                  :key="genKey()"
                                  :title="collapseItem.title"
                                  :name="collapseItem.name">
                    <!-- 按钮组 -->
                    <div class="el-collapse-item-button--right">
                        <el-button-group v-if="collapseItem.type == 'table'">
                            <el-button type="primary" :size="viewModel.size" icon="el-icon-plus" title="添加行"></el-button>
                            <el-button type="warning" :size="viewModel.size" icon="el-icon-document" title="复制行"></el-button>
                            <el-button type="success" :size="viewModel.size" icon="el-icon-edit-outline" title="粘贴行"></el-button>
                            <el-button type="danger" :size="viewModel.size" icon="el-icon-delete" title="删除行"></el-button>
                        </el-button-group>
                        <el-dropdown @command="handleCommandSettings">
                            <el-button type="primary" :size="viewModel.size" icon="el-icon-setting" title="设置">
                                <i class="el-icon-caret-bottom el-icon--right"></i>
                            </el-button>
                            <el-dropdown-menu slot="dropdown">
                                <el-dropdown-item command="COLUMN_SETTINGS">数据列设置</el-dropdown-item>
                            </el-dropdown-menu>
                        </el-dropdown>
                    </div>



                    <!-- 表单展现 -->
                    <el-form :ref="collapseItem.key"
                             v-if="collapseItem.type == 'form'"
                             :model="collapseItem.$model"
                             :rules="collapseItem.formModel.rules"
                             :inline="collapseItem.formModel.inline"
                             :label-position="collapseItem.formModel.label_position"
                             :label-width="collapseItem.formModel.label_width ? collapseItem.formModel.label_width + 'px' : null"
                             :label-suffix="collapseItem.formModel.label_suffix"
                             :show-message="collapseItem.formModel.show_message"
                             :inline-message="collapseItem.formModel.inline_message"
                             :status-icon="collapseItem.formModel.status_icon"
                             :size="collapseItem.size">
                        <el-form-item v-for="(itemModel, $index) in collapseItem.formModel.items"
                                      :key="genKey()"
                                      v-show="itemModel.display"
                                      :prop="itemModel.data_key"
                                      :label="itemModel.show_label ? itemModel.label : null"
                                      :label-width="itemModel.label_width ? itemModel.label_width + 'px' : null"
                                      :required="itemModel.required"
                                      :rules="itemModel.rules"
                                      :error="itemModel.error"
                                      :show-message="itemModel.show_message"
                                      :inline-message="itemModel.inline_message"
                                      :size="collapseItem.size"
                                      :title="itemModel.label">

                            <!-- 类型：text、number、textarea、date、month、week、datetime、datetime-local、time、email、url、range、search、color (忽略属性：size form label) -->
                            <el-input
                                    v-if="['text','number','textarea','date','month','week','datetime','datetime-local','time','email','url','range','search','color'].indexOf(itemModel.type) != -1"
                                    :type="itemModel.type"
                                    v-model="collapseItem.$model[itemModel.data_key]"
                                    :title="itemModel.title({value: collapseItem.$model[itemModel.data_key], itemModel : itemModel, $model : collapseItem.$model})"
                                    :name="itemModel.name"
                                    :value="itemModel.value"
                                    :minlength="itemModel.minlength"
                                    :maxlength="itemModel.maxlength"
                                    :min="itemModel.min"
                                    :max="itemModel.max"
                                    :step="itemModel.step"
                                    :prefix-icon="itemModel.prefix_icon"
                                    :suffix-icon="itemModel.suffix_icon || ' '"
                                    :auto-complete="itemModel.auto_complete"
                                    :autofocus="itemModel.autofocus"
                                    :tabindex="itemModel.tabindex"
                                    :readonly="itemModel.readonly"
                                    :disabled="itemModel.disabled"
                                    :clearable="itemModel.clearable && !itemModel.readonly && !itemModel.disabled"
                                    :rows="itemModel.rows"
                                    :resize="itemModel.resize"
                                    :autosize="itemModel.autosize"
                                    :placeholder="itemModel.placeholder"
                                    :class="'input-edit ' + itemModel.class"
                                    :style="'min-width:35px;' + (itemModel.style || '') + (!viewModel.form_auto_width && itemModel.width ? '; width:' + itemModel.width + 'px;' : '')"
                                    @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, $model : collapseItem.$model})"
                                    @blur="itemModel.events.blur({data_key : itemModel.data_key, itemModel : itemModel, app : _self, $model : collapseItem.$model})"
                                    @focus="itemModel.events.focus({data_key : itemModel.data_key, itemModel : itemModel, app : _self, $model : collapseItem.$model})">
                            </el-input>

                            <!-- 类型：scaler (忽略属性：size label) -->
                            <el-input-number v-if="itemModel.type == 'scaler'"
                                             :type="itemModel.type"
                                             v-model="collapseItem.$model[itemModel.data_key]"
                                             :title="itemModel.title({value: collapseItem.$model[itemModel.data_key], itemModel : itemModel, $model : collapseItem.$model})"
                                             :name="itemModel.name"
                                             :value="itemModel.value"
                                             :min="itemModel.min"
                                             :max="itemModel.max"
                                             :step="itemModel.step"
                                             :debounce="itemModel.debounce"
                                             :controls="itemModel.controls"
                                             :controls-position="itemModel.controls_position"
                                             :disabled="itemModel.disabled"
                                             :class="'input-edit ' + itemModel.class"
                                             :style="(itemModel.style || '') + (!viewModel.form_auto_width && itemModel.width ? '; width:' + itemModel.width + 'px;' : '')"
                                             @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, $model : collapseItem.$model})"
                                             @blur="itemModel.events.blur({data_key : itemModel.data_key, itemModel : itemModel, app : _self, $model : collapseItem.$model})"
                                             @focus="itemModel.events.focus({data_key : itemModel.data_key, itemModel : itemModel, app : _self, $model : collapseItem.$model})">
                            </el-input-number>

                            <!-- 类型：radio (忽略属性：size) -->
                            <el-radio-group v-if="itemModel.type == 'radio'"
                                            :type="itemModel.type"
                                            v-model="collapseItem.$model[itemModel.data_key]"
                                            :title="itemModel.title({value: collapseItem.$model[itemModel.data_key], itemModel : itemModel, $model : collapseItem.$model})"
                                            :text-color="itemModel.text_color"
                                            :fill="itemModel.fill"
                                            :disabled="itemModel.disabled"
                                            :class="'input-edit ' + itemModel.class"
                                            :style="(itemModel.style || '') + (!viewModel.form_auto_width && itemModel.width ? '; width:' + itemModel.width + 'px;' : '')"
                                            @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, $model : collapseItem.$model})">
                                <el-radio v-for="option in itemModel.options"
                                          v-show="option[itemModel.option_hide_key] != true"
                                          :key="option[itemModel.option_key]"
                                          :label="option[itemModel.option_key]"
                                          :disabled="option[itemModel.option_disabled_key]">
                                    {{option[itemModel.option_label]}}
                                </el-radio>
                            </el-radio-group>

                            <!-- 类型：checkbox (忽略属性：size) -->
                            <el-checkbox-group v-if="itemModel.type == 'checkbox'"
                                               :type="itemModel.type"
                                               v-model="collapseItem.$model[itemModel.data_key]"
                                               :title="itemModel.title({value: collapseItem.$model[itemModel.data_key], itemModel : itemModel, $model : collapseItem.$model})"
                                               :min="itemModel.min"
                                               :max="itemModel.max"
                                               :text-color="itemModel.text_color"
                                               :fill="itemModel.fill"
                                               :disabled="itemModel.disabled"
                                               :class="'input-edit ' + itemModel.class"
                                               :style="(itemModel.style || '') + (!viewModel.form_auto_width && itemModel.width ? '; width:' + itemModel.width + 'px;' : '')"
                                               @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, $model : collapseItem.$model})">
                                <el-checkbox v-for="option in itemModel.options"
                                             v-show="option[itemModel.option_hide_key] != true"
                                             :key="option[itemModel.option_key]"
                                             :label="option[itemModel.option_key]"
                                             :disabled="option[itemModel.option_disabled_key]">
                                    {{option[itemModel.option_label]}}
                                </el-checkbox>
                            </el-checkbox-group>

                            <!-- 类型：select (忽略属性：size) -->
                            <el-select v-if="itemModel.type == 'select'"
                                       :type="itemModel.type"
                                       v-model="collapseItem.$model[itemModel.data_key]"
                                       :title="itemModel.title({value: collapseItem.$model[itemModel.data_key], itemModel : itemModel, $model : collapseItem.$model})"
                                       :name="itemModel.name"
                                       :value-key="itemModel.select_value_key"
                                       :multiple="itemModel.multiple"
                                       :multiple-limit="itemModel.multiple_limit"
                                       :collapse-tags="itemModel.collapse_tags"
                                       :filterable="itemModel.filterable"
                                       :allow-create="itemModel.allow_create"
                                       :filter-method="itemModel.filter_method"
                                       :remote="itemModel.remote"
                                       :remote-method="itemModel.remote_method"
                                       :loading="itemModel.loading"
                                       :loading-text="itemModel.loading_text"
                                       :no-match-text="itemModel.no_match_text"
                                       :no-data-text="itemModel.no_data_text"
                                       :popper-class="itemModel.popper_class"
                                       :reserve-keyword="itemModel.reserve_keyword"
                                       :default-first-option="itemModel.default_first_option"
                                       :readonly="itemModel.readonly"
                                       :disabled="itemModel.disabled"
                                       :clearable="itemModel.clearable && !itemModel.readonly && !itemModel.disabled"
                                       :placeholder="itemModel.placeholder"
                                       :class="'input-edit ' + itemModel.class"
                                       :style="(itemModel.style || '') + (!viewModel.form_auto_width && itemModel.width ? '; width:' + itemModel.width + 'px;' : '')"
                                       @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, $model : collapseItem.$model})"
                                       @visible-change="itemModel.events.visibleChange"
                                       @remove-tag="itemModel.events.removeTag"
                                       @clear="itemModel.events.clear({data_key : itemModel.data_key, itemModel : itemModel, app : _self, $model : collapseItem.$model})"
                                       @blur="itemModel.events.blur({data_key : itemModel.data_key, itemModel : itemModel, app : _self, $model : collapseItem.$model})"
                                       @focus="itemModel.events.focus({data_key : itemModel.data_key, itemModel : itemModel, app : _self, $model : collapseItem.$model})">
                                <el-option v-for="option in itemModel.options"
                                           v-show="option[itemModel.option_hide_key] != true"
                                           :key="option[itemModel.option_key]"
                                           :label="option[itemModel.option_label]"
                                           :value="option[itemModel.option_key]"
                                           :disabled="option[itemModel.option_disabled]">
                                </el-option>
                            </el-select>

                            <!-- 类型：cascader (忽略属性：size) -->
                            <el-cascader v-if="itemModel.type == 'cascader'"
                                         :type="itemModel.type"
                                         v-model="collapseItem.$model[itemModel.data_key]"
                                         :title="itemModel.title({value: collapseItem.$model[itemModel.data_key], itemModel : itemModel, $model : collapseItem.$model})"
                                         :name="itemModel.name"
                                         :value="itemModel.value"
                                         :options="itemModel.options"
                                         :props="itemModel.props"
                                         :separator="itemModel.separator"
                                         :popper-class="itemModel.popper_class"
                                         :expand-trigger="itemModel.expand_trigger"
                                         :show-all-levels="itemModel.show_all_levels"
                                         :before-filter="itemModel.before_filter"
                                         :filterable="true"
                                         :debounce="itemModel.debounce"
                                         :change-on-select="itemModel.change_on_select"
                                         :readonly="itemModel.readonly"
                                         :disabled="itemModel.disabled"
                                         :clearable="itemModel.clearable && !itemModel.readonly && !itemModel.disabled"
                                         :placeholder="itemModel.placeholder"
                                         :class="'input-edit ' + itemModel.class"
                                         :style="(itemModel.style || '') + (!viewModel.form_auto_width && itemModel.width ? '; width:' + itemModel.width + 'px;' : '')"
                                         @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, $model : collapseItem.$model})"
                                         @activeItemChange="itemModel.events.activeItemChange">
                            </el-cascader>

                            <!-- 类型：switch -->
                            <el-switch v-if="itemModel.type == 'switch'"
                                       :type="itemModel.type"
                                       v-model="collapseItem.$model[itemModel.data_key]"
                                       :title="itemModel.title({value: collapseItem.$model[itemModel.data_key], itemModel : itemModel, $model : collapseItem.$model})"
                                       :name="itemModel.name"
                                       :active-text="itemModel.active_text"
                                       :inactive-text="itemModel.inactive_text"
                                       :active-value="itemModel.active_value"
                                       :inactive-value="itemModel.inactive_value"
                                       :active-color="itemModel.active_color"
                                       :inactive-color="itemModel.inactive_color"
                                       :active-icon-class="itemModel.active_icon_class"
                                       :inactive-icon-class="itemModel.inactive_icon_class"
                                       :disabled="itemModel.disabled"
                                       :width="itemModel.switch_width"
                                       :class="'input-edit ' + itemModel.class"
                                       :style="(itemModel.style || '') + (!viewModel.form_auto_width && itemModel.width ? '; width:' + itemModel.width + 'px;' : '')"
                                       @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, $model : collapseItem.$model})">
                            </el-switch>

                            <!-- 类型：slider (忽略属性：label) -->
                            <el-slider v-if="itemModel.type == 'slider'"
                                       :type="itemModel.type"
                                       v-model="collapseItem.$model[itemModel.data_key]"
                                       :title="itemModel.title({value: collapseItem.$model[itemModel.data_key], itemModel : itemModel, $model : collapseItem.$model})"
                                       :min="itemModel.min"
                                       :max="itemModel.max"
                                       :step="itemModel.step"
                                       :show-input="itemModel.show_input"
                                       :show-input-controls="itemModel.show_input_controls"
                                       :show-stops="itemModel.show_stops"
                                       :show-tooltip="itemModel.show_tooltip"
                                       :format-tooltip="itemModel.format_tooltip"
                                       :range="itemModel.range"
                                       :vertical="itemModel.vertical"
                                       :debounce="itemModel.debounce"
                                       :disabled="itemModel.disabled"
                                       :height="itemModel.height"
                                       :class="'input-edit ' + itemModel.class"
                                       :style="'margin-left: 5px;' + (itemModel.style || '') + (!viewModel.form_auto_width && (itemModel.width - 5) ? '; width:' + (itemModel.width - 5) + 'px;' : '')"
                                       @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, $model : collapseItem.$model})">
                            </el-slider>

                            <!-- 类型：rate -->
                            <el-rate v-if="itemModel.type == 'rate'"
                                     :type="itemModel.type"
                                     v-model="collapseItem.$model[itemModel.data_key]"
                                     :title="itemModel.title({value: collapseItem.$model[itemModel.data_key], itemModel : itemModel, $model : collapseItem.$model})"
                                     :max="itemModel.max"
                                     :allow-half="itemModel.allow_half"
                                     :low-threshold="itemModel.low_threshold"
                                     :high-threshold="itemModel.high_threshold"
                                     :colors="itemModel.colors"
                                     :void-color="itemModel.void_color"
                                     :disabled-void-color="itemModel.disabled_void_color"
                                     :icon-classes="itemModel.icon_classes"
                                     :void-icon-class="itemModel.void_icon_class"
                                     :disabled-void-icon-class="itemModel.disabled_void_icon_class"
                                     :show-text="itemModel.show_text"
                                     :show-score="itemModel.show_score"
                                     :text-color="itemModel.text_color"
                                     :texts="itemModel.texts"
                                     :score-template="itemModel.score_template"
                                     :disabled="itemModel.disabled"
                                     :placeholder="itemModel.placeholder"
                                     :class="'input-edit ' + itemModel.class"
                                     :style="(itemModel.style || '') + (!viewModel.form_auto_width && itemModel.width ? '; width:' + itemModel.width + 'px;' : '')"
                                     @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, $model : collapseItem.$model})">
                            </el-rate>

                            <!-- 类型：time-select (忽略属性：size) -->
                            <el-time-select v-if="itemModel.type == 'time-select'"
                                            :type="itemModel.type"
                                            v-model="collapseItem.$model[itemModel.data_key]"
                                            :title="itemModel.title({value: collapseItem.$model[itemModel.data_key], itemModel : itemModel, $model : collapseItem.$model})"
                                            :name="itemModel.name"
                                            :value="itemModel.value"
                                            :default-value="itemModel.default_value"
                                            :editable="itemModel.editable"
                                            :is-range="itemModel.is_range"
                                            :arrow-control="itemModel.arrow_control"
                                            :align="itemModel.align"
                                            :popper-class="itemModel.popper_class"
                                            :picker-options="itemModel.picker_options"
                                            :range-separator="itemModel.range_separator"
                                            :value-format="itemModel.value_format"
                                            :readonly="itemModel.readonly"
                                            :disabled="itemModel.disabled"
                                            :clearable="itemModel.clearable && !itemModel.readonly && !itemModel.disabled"
                                            :start-placeholder="itemModel.start_placeholder"
                                            :end-placeholder="itemModel.end_placeholder"
                                            :placeholder="itemModel.placeholder"
                                            :class="'input-edit ' + itemModel.class"
                                            :style="(itemModel.style || '') + (!viewModel.form_auto_width && itemModel.width ? '; width:' + itemModel.width + 'px;' : '')"
                                            @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, $model : collapseItem.$model})"
                                            @blur="itemModel.events.blur({data_key : itemModel.data_key, itemModel : itemModel, app : _self, $model : collapseItem.$model})"
                                            @focus="itemModel.events.focus({data_key : itemModel.data_key, itemModel : itemModel, app : _self, $model : collapseItem.$model})">
                            </el-time-select>

                            <!-- 类型：time-picker (忽略属性：size) -->
                            <el-time-picker v-if="itemModel.type == 'time-picker'"
                                            :type="itemModel.type"
                                            v-model="collapseItem.$model[itemModel.data_key]"
                                            :title="itemModel.title({value: collapseItem.$model[itemModel.data_key], itemModel : itemModel, $model : collapseItem.$model})"
                                            :name="itemModel.name"
                                            :value="itemModel.value"
                                            :default-value="itemModel.default_value"
                                            :editable="itemModel.editable"
                                            :is-range="itemModel.is_range"
                                            :arrow-control="itemModel.arrow_control"
                                            :align="itemModel.align"
                                            :popper-class="itemModel.popper_class"
                                            :picker-options="itemModel.picker_options"
                                            :range-separator="itemModel.range_separator"
                                            :value-format="itemModel.value_format"
                                            :unlink-panels="itemModel.unlink_panels"
                                            :readonly="itemModel.readonly"
                                            :disabled="itemModel.disabled"
                                            :clearable="itemModel.clearable && !itemModel.readonly && !itemModel.disabled"
                                            :start-placeholder="itemModel.start_placeholder"
                                            :end-placeholder="itemModel.end_placeholder"
                                            :placeholder="itemModel.placeholder"
                                            :class="'input-edit ' + itemModel.class"
                                            :style="(itemModel.style || '') + (!viewModel.form_auto_width && itemModel.width ? '; width:' + itemModel.width + 'px;' : '')"
                                            @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, $model : collapseItem.$model})"
                                            @blur="itemModel.events.blur({data_key : itemModel.data_key, itemModel : itemModel, app : _self, $model : collapseItem.$model})"
                                            @focus="itemModel.events.focus({data_key : itemModel.data_key, itemModel : itemModel, app : _self, $model : collapseItem.$model})">
                            </el-time-picker>

                            <!-- 类型：date-picker (忽略属性：size) -->
                            <el-date-picker v-if="itemModel.type == 'date-picker'"
                                            :type="itemModel.date_type"
                                            v-model="collapseItem.$model[itemModel.data_key]"
                                            :title="itemModel.title({value: collapseItem.$model[itemModel.data_key], itemModel : itemModel, $model : collapseItem.$model})"
                                            :name="itemModel.name"
                                            :value="itemModel.value"
                                            :default-value="itemModel.default_value"
                                            :editable="itemModel.editable"
                                            :align="itemModel.align"
                                            :popper-class="itemModel.popper_class"
                                            :picker-options="itemModel.picker_options"
                                            :range-separator="itemModel.range_separator"
                                            :format="itemModel.format"
                                            :value-format="itemModel.value_format"
                                            :unlink-panels="itemModel.unlink_panels"
                                            :readonly="itemModel.readonly"
                                            :disabled="itemModel.disabled"
                                            :clearable="itemModel.clearable && !itemModel.readonly && !itemModel.disabled"
                                            :start-placeholder="itemModel.start_placeholder"
                                            :end-placeholder="itemModel.end_placeholder"
                                            :placeholder="itemModel.placeholder"
                                            :class="'input-edit ' + itemModel.class"
                                            :style="(itemModel.style || '') + (!viewModel.form_auto_width && itemModel.width ? '; width:' + itemModel.width + 'px;' : '')"
                                            @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, $model : collapseItem.$model})"
                                            @blur="itemModel.events.blur({data_key : itemModel.data_key, itemModel : itemModel, app : _self, $model : collapseItem.$model})"
                                            @focus="itemModel.events.focus({data_key : itemModel.data_key, itemModel : itemModel, app : _self, $model : collapseItem.$model})">

                            </el-date-picker>

                            <!-- 类型：color-picker (忽略属性：size) -->
                            <el-color-picker v-if="itemModel.type == 'color-picker'"
                                             :type="itemModel.date_type"
                                             v-model="collapseItem.$model[itemModel.data_key]"
                                             :title="itemModel.title({value: collapseItem.$model[itemModel.data_key], itemModel : itemModel, $model : collapseItem.$model})"
                                             :name="itemModel.name"
                                             :show-alpha="itemModel.show_alpha"
                                             :default-value="itemModel.default_value"
                                             :color-format="itemModel.color_format"
                                             :popper-class="itemModel.popper_class"
                                             :readonly="itemModel.readonly"
                                             :disabled="itemModel.disabled"
                                             :clearable="itemModel.clearable && !itemModel.readonly && !itemModel.disabled"
                                             :class="'input-edit ' + itemModel.class"
                                             :style="'min-width:35px;' + (itemModel.style || '') + (!viewModel.form_auto_width && itemModel.width ? '; width:' + itemModel.width + 'px;' : '')"
                                             @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, $model : collapseItem.$model})"
                                             @active-change="itemModel.events.activechange">
                            </el-color-picker>

                            <!-- 类型：ref (忽略属性：size form label)-->
                            <el-input v-if="itemModel.type == 'ref'"
                                      :type="itemModel.type"
                                      v-model="collapseItem.$model[itemModel.data_key]"
                                      :title="itemModel.title({value: collapseItem.$model[itemModel.data_key], itemModel : itemModel, $model : collapseItem.$model})"
                                      :name="itemModel.name"
                                      :value="itemModel.value"
                                      :minlength="itemModel.minlength"
                                      :maxlength="itemModel.maxlength"
                                      :min="itemModel.min"
                                      :max="itemModel.max"
                                      :step="itemModel.step"
                                      :prefix-icon="itemModel.prefix_icon"
                                      :suffix-icon="itemModel.suffix_icon"
                                      :auto-complete="itemModel.auto_complete"
                                      :autofocus="itemModel.autofocus"
                                      :tabindex="itemModel.tabindex"
                                      :readonly="itemModel.readonly"
                                      :disabled="itemModel.disabled"
                                      :clearable="itemModel.clearable && !itemModel.disabled"
                                      :rows="itemModel.rows"
                                      :resize="itemModel.resize"
                                      :autosize="itemModel.autosize"
                                      :placeholder="itemModel.placeholder"
                                      :class="'input-edit ref-input ' + itemModel.class"
                                      :style="(itemModel.style || '') + (!viewModel.form_auto_width && itemModel.width ? '; width:' + itemModel.width + 'px;' : '')"
                                      @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, $model : collapseItem.$model})">
                                <el-button slot="append" icon="el-icon-search"
                                           @click="itemModel.events.showRefModel({itemModel : itemModel, app : _self, $model : collapseItem.$model})"></el-button>
                            </el-input>


                        </el-form-item>
                    </el-form>

                    <!-- 表格展现 -->
                    <el-table :ref="collapseItem.key"
                              v-if="collapseItem.type == 'table'"
                              :data="collapseItem.$model"
                              :height="collapseItem.tableModel.height"
                              :max-height="collapseItem.tableModel.max_height"
                              :stripe="collapseItem.tableModel.stripe"
                              :border="collapseItem.tableModel.border"
                              :size="viewModel.size"
                              :fit="collapseItem.tableModel.fit"
                              :show-header="collapseItem.tableModel.show_header"
                              :highlight-current-row="collapseItem.tableModel.highlight_current_row"
                              :current-row-key="collapseItem.tableModel.current_row_key"
                              :row-class-name="collapseItem.tableModel.row_class_name"
                              :row-style="collapseItem.tableModel.row_style"
                              :cell-class-name="collapseItem.tableModel.cell_class_name"
                              :cell-style="collapseItem.tableModel.cell_style"
                              :header-row-class-name="collapseItem.tableModel.header_row_class_name"
                              :header-row-style="collapseItem.tableModel.header_row_style"
                              :header-cell-class-name="collapseItem.tableModel.header_cell_class_name"
                              :header-cell-style="collapseItem.tableModel.header_cell_style"
                              :row-key="collapseItem.tableModel.row_key"
                              :empty-text="collapseItem.tableModel.empty_text"
                              :default-expand-all="collapseItem.tableModel.default_expand_all"
                              :expand-row-keys="collapseItem.tableModel.expand_row_keys"
                              :default-sort="collapseItem.tableModel.default_sort"
                              :tooltip-effect="collapseItem.tableModel.tooltip_effect"
                              :show-summary="collapseItem.tableModel.show_summary"
                              :sum-text="collapseItem.tableModel.sum_text"
                              :summary-method="collapseItem.tableModel.summary_method"
                              :span-method="collapseItem.tableModel.span_method"
                              class="edit-table"
                              style="width: 100%"

                              @select="collapseItem.tableModel.events.select"
                              @select-all="collapseItem.tableModel.events.selectAll"
                              @selection-change="collapseItem.tableModel.events.selectionChange"
                              @cell-mouse-enter="collapseItem.tableModel.events.cellMouseEnter"
                              @cell-mouse-leave="collapseItem.tableModel.events.cellMouseLeave"
                              @cell-click="collapseItem.tableModel.events.cellClick"
                              @cell-dblclick="collapseItem.tableModel.events.cellDblclick"
                              @row-click="collapseItem.tableModel.events.rowClick"
                              @row-contextmenu="collapseItem.tableModel.events.rowContextmenu"
                              @row-dblclick="collapseItem.tableModel.events.rowDblclick"
                              @header-click="collapseItem.tableModel.events.headerClick"
                              @sort-change="collapseItem.tableModel.events.sortChange"
                              @filter-change="collapseItem.tableModel.events.filterChange"
                              @current-change="collapseItem.tableModel.events.currentChange"
                              @header-dragend="collapseItem.tableModel.events.headerDragend"
                              @expand-change="collapseItem.tableModel.events.expandChange">

                        <el-table-column type="selection" fix v-if="collapseItem.tableModel.show_selection"
                                         :fixed="true" :width="40"></el-table-column>
                        <el-table-column type="index" v-if="collapseItem.tableModel.show_index" :fixed="true"
                                         :width="40"></el-table-column>
                        <el-table-column v-for="itemModel in collapseItem.tableModel.items"
                                         :key="genKey()"
                                         :type="itemModel.column_type"
                                         :index="itemModel.index"
                                         :column-key="itemModel.column_key"
                                         :label="itemModel.label"
                                         :prop="itemModel.data_key"
                                         :width="itemModel.width"
                                         :min-width="itemModel.min_width || 120"
                                         :fixed="itemModel.fixed"
                                         :render-header="itemModel.render_header"
                                         :sortable="itemModel.sortable"
                                         :sort-method="itemModel.sort_method"
                                         :sort-by="itemModel.sort_by"
                                         :resizable="itemModel.resizable"
                                         :formatter="itemModel.formatter"
                                         :show-overflow-tooltip="itemModel.show_overflow_tooltip"
                                         :align="itemModel.align"
                                         :header-align="itemModel.header_align"
                                         :class-name="itemModel.class_name"
                                         :label-class-name="itemModel.label_class_name"
                                         :selectable="itemModel.selectable"
                                         :reserve-selection="itemModel.reserve_selection"
                                         :filters="itemModel.filters"
                                         :filter-placement="itemModel.filter_placement"
                                         :filter-multiple="itemModel.filter_multiple"
                                         :filter-method="itemModel.filter_method"
                                         :filtered-value="itemModel.filtered_value">

                            <template slot-scope="scope">


                                <!-- 类型：text、number、textarea、date、month、week、datetime、datetime-local、time、email、url、range、search、color (忽略属性：size form label) -->
                                <el-input
                                        v-if="['text','number','textarea','date','month','week','datetime','datetime-local','time','email','url','range','search','color'].indexOf(itemModel.type) != -1"
                                        :type="itemModel.type"
                                        v-model="scope.row[itemModel.data_key]"
                                        :title="itemModel.title({value: scope.row[itemModel.data_key], itemModel : itemModel, $model : scope.row})"
                                        :name="itemModel.name"
                                        :value="itemModel.value"
                                        :minlength="itemModel.minlength"
                                        :maxlength="itemModel.maxlength"
                                        :min="itemModel.min"
                                        :max="itemModel.max"
                                        :step="itemModel.step"
                                        :prefix-icon="itemModel.prefix_icon"
                                        :suffix-icon="itemModel.suffix_icon || ' '"
                                        :auto-complete="itemModel.auto_complete"
                                        :autofocus="itemModel.autofocus"
                                        :tabindex="itemModel.tabindex"
                                        :readonly="itemModel.readonly"
                                        :disabled="itemModel.disabled"
                                        :clearable="itemModel.clearable && !itemModel.readonly && !itemModel.disabled"
                                        :rows="itemModel.rows"
                                        :resize="itemModel.resize"
                                        :autosize="itemModel.autosize"
                                        :placeholder="itemModel.placeholder"
                                        :size="viewModel.size"
                                        :class="'input-edit ' + itemModel.class"
                                        :style="'width:100%;' + (itemModel.style || '')"
                                        @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})"
                                        @blur="itemModel.events.blur({data_key : itemModel.data_key, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})"
                                        @focus="itemModel.events.focus({data_key : itemModel.data_key, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})">
                                </el-input>

                                <!-- 类型：scaler (忽略属性：size label) -->
                                <el-input-number v-if="itemModel.type == 'scaler'"
                                                 :type="itemModel.type"
                                                 v-model="scope.row[itemModel.data_key]"
                                                 :title="itemModel.title({value: scope.row[itemModel.data_key], itemModel : itemModel, $model : scope.row})"
                                                 :name="itemModel.name"
                                                 :value="itemModel.value"
                                                 :min="itemModel.min"
                                                 :max="itemModel.max"
                                                 :step="itemModel.step"
                                                 :debounce="itemModel.debounce"
                                                 :controls="itemModel.controls"
                                                 :controls-position="itemModel.controls_position"
                                                 :disabled="itemModel.disabled"
                                                 :size="viewModel.size"
                                                 :class="'input-edit ' + itemModel.class"
                                                 :style="'width:100%;' + (itemModel.style || '')"
                                                 @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})"
                                                 @blur="itemModel.events.blur({data_key : itemModel.data_key, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})"
                                                 @focus="itemModel.events.focus({data_key : itemModel.data_key, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})">
                                </el-input-number>

                                <!-- 类型：radio (忽略属性：size) -->
                                <el-radio-group v-if="itemModel.type == 'radio'"
                                                :type="itemModel.type"
                                                v-model="scope.row[itemModel.data_key]"
                                                :title="itemModel.title({value: scope.row[itemModel.data_key], itemModel : itemModel, $model : scope.row})"
                                                :text-color="itemModel.text_color"
                                                :fill="itemModel.fill"
                                                :disabled="itemModel.disabled"
                                                :size="viewModel.size"
                                                :class="'input-edit ' + itemModel.class"
                                                :style="'margin-left:5px!important;width:100%;' + (itemModel.style || '')"
                                                @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})">
                                    <el-radio v-for="option in itemModel.options"
                                              v-show="option[itemModel.option_hide_key] != true"
                                              :key="option[itemModel.option_key]"
                                              :label="option[itemModel.option_key]"
                                              :disabled="option[itemModel.option_disabled_key]">
                                        {{option[itemModel.option_label]}}
                                    </el-radio>
                                </el-radio-group>

                                <!-- 类型：checkbox (忽略属性：size) -->
                                <el-checkbox-group v-if="itemModel.type == 'checkbox'"
                                                   :type="itemModel.type"
                                                   v-model="scope.row[itemModel.data_key]"
                                                   :title="itemModel.title({value: scope.row[itemModel.data_key], itemModel : itemModel, $model : scope.row})"
                                                   :min="itemModel.min"
                                                   :max="itemModel.max"
                                                   :text-color="itemModel.text_color"
                                                   :fill="itemModel.fill"
                                                   :disabled="itemModel.disabled"
                                                   :size="viewModel.size"
                                                   :class="'input-edit ' + itemModel.class"
                                                   :style="'margin-left:5px!important;width:100%;' + (itemModel.style || '')"
                                                   @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})">
                                    <el-checkbox v-for="option in itemModel.options"
                                                 v-show="option[itemModel.option_hide_key] != true"
                                                 :key="option[itemModel.option_key]"
                                                 :label="option[itemModel.option_key]"
                                                 :disabled="option[itemModel.option_disabled_key]">
                                        {{option[itemModel.option_label]}}
                                    </el-checkbox>
                                </el-checkbox-group>

                                <!-- 类型：select (忽略属性：size) -->
                                <el-select v-if="itemModel.type == 'select'"
                                           :type="itemModel.type"
                                           v-model="scope.row[itemModel.data_key]"
                                           :title="itemModel.title({value: scope.row[itemModel.data_key], itemModel : itemModel, $model : scope.row})"
                                           :name="itemModel.name"
                                           :value-key="itemModel.select_value_key"
                                           :multiple="itemModel.multiple"
                                           :multiple-limit="itemModel.multiple_limit"
                                           :collapse-tags="itemModel.collapse_tags"
                                           :filterable="itemModel.filterable"
                                           :allow-create="itemModel.allow_create"
                                           :filter-method="itemModel.filter_method"
                                           :remote="itemModel.remote"
                                           :remote-method="itemModel.remote_method"
                                           :loading="itemModel.loading"
                                           :loading-text="itemModel.loading_text"
                                           :no-match-text="itemModel.no_match_text"
                                           :no-data-text="itemModel.no_data_text"
                                           :popper-class="itemModel.popper_class"
                                           :reserve-keyword="itemModel.reserve_keyword"
                                           :default-first-option="itemModel.default_first_option"
                                           :readonly="itemModel.readonly"
                                           :disabled="itemModel.disabled"
                                           :clearable="itemModel.clearable && !itemModel.readonly && !itemModel.disabled"
                                           :placeholder="itemModel.placeholder"
                                           :size="viewModel.size"
                                           :class="'input-edit ' + itemModel.class"
                                           :style="'width:100%;' + (itemModel.style || '')"
                                           @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})"
                                           @visible-change="itemModel.events.visibleChange"
                                           @remove-tag="itemModel.events.removeTag"
                                           @clear="itemModel.events.clear({data_key : itemModel.data_key, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})"
                                           @blur="itemModel.events.blur({data_key : itemModel.data_key, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})"
                                           @focus="itemModel.events.focus({data_key : itemModel.data_key, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})">
                                    <el-option v-for="option in itemModel.options"
                                               v-show="option[itemModel.option_hide_key] != true"
                                               :key="option[itemModel.option_key]"
                                               :label="option[itemModel.option_label]"
                                               :value="option[itemModel.option_key]"
                                               :disabled="option[itemModel.option_disabled]">
                                    </el-option>
                                </el-select>

                                <!-- 类型：cascader (忽略属性：size) -->
                                <el-cascader v-if="itemModel.type == 'cascader'"
                                             :type="itemModel.type"
                                             v-model="scope.row[itemModel.data_key]"
                                             :title="itemModel.title({value: scope.row[itemModel.data_key], itemModel : itemModel, $model : scope.row})"
                                             :name="itemModel.name"
                                             :value="itemModel.value"
                                             :options="itemModel.options"
                                             :props="itemModel.props"
                                             :separator="itemModel.separator"
                                             :popper-class="itemModel.popper_class"
                                             :expand-trigger="itemModel.expand_trigger"
                                             :show-all-levels="itemModel.show_all_levels"
                                             :before-filter="itemModel.before_filter"
                                             :filterable="true"
                                             :debounce="itemModel.debounce"
                                             :change-on-select="itemModel.change_on_select"
                                             :readonly="itemModel.readonly"
                                             :disabled="itemModel.disabled"
                                             :clearable="itemModel.clearable && !itemModel.readonly && !itemModel.disabled"
                                             :placeholder="itemModel.placeholder"
                                             :size="viewModel.size"
                                             :class="'input-edit ' + itemModel.class"
                                             :style="'width:100%;' + (itemModel.style || '')"
                                             @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})"
                                             @activeItemChange="itemModel.events.activeItemChange">
                                </el-cascader>

                                <!-- 类型：switch -->
                                <el-switch v-if="itemModel.type == 'switch'"
                                           :type="itemModel.type"
                                           v-model="scope.row[itemModel.data_key]"
                                           :title="itemModel.title({value: scope.row[itemModel.data_key], itemModel : itemModel, $model : scope.row})"
                                           :name="itemModel.name"
                                           :active-text="itemModel.active_text"
                                           :inactive-text="itemModel.inactive_text"
                                           :active-value="itemModel.active_value"
                                           :inactive-value="itemModel.inactive_value"
                                           :active-color="itemModel.active_color"
                                           :inactive-color="itemModel.inactive_color"
                                           :active-icon-class="itemModel.active_icon_class"
                                           :inactive-icon-class="itemModel.inactive_icon_class"
                                           :disabled="itemModel.disabled"
                                           :width="itemModel.switch_width"
                                           :size="viewModel.size"
                                           :class="'input-edit ' + itemModel.class"
                                           :style="'margin:0 5px!important; ' + (itemModel.style || '')"
                                           @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})">
                                </el-switch>

                                <!-- 类型：slider (忽略属性：label) -->
                                <el-slider v-if="itemModel.type == 'slider'"
                                           :type="itemModel.type"
                                           v-model="scope.row[itemModel.data_key]"
                                           :title="itemModel.title({value: scope.row[itemModel.data_key], itemModel : itemModel, $model : scope.row})"
                                           :min="itemModel.min"
                                           :max="itemModel.max"
                                           :step="itemModel.step"
                                           :show-input="itemModel.show_input"
                                           :show-input-controls="itemModel.show_input_controls"
                                           :show-stops="itemModel.show_stops"
                                           :show-tooltip="itemModel.show_tooltip"
                                           :format-tooltip="itemModel.format_tooltip"
                                           :range="itemModel.range"
                                           :vertical="itemModel.vertical"
                                           :debounce="itemModel.debounce"
                                           :disabled="itemModel.disabled"
                                           :height="itemModel.height"
                                           :size="viewModel.size"
                                           :class="'input-edit ' + itemModel.class"
                                           :style="'margin: 0 10px; ' + (itemModel.style || '')"
                                           @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})">
                                </el-slider>

                                <!-- 类型：rate -->
                                <el-rate v-if="itemModel.type == 'rate'"
                                         :type="itemModel.type"
                                         v-model="scope.row[itemModel.data_key]"
                                         :title="itemModel.title({value: scope.row[itemModel.data_key], itemModel : itemModel, $model : scope.row})"
                                         :max="itemModel.max"
                                         :allow-half="itemModel.allow_half"
                                         :low-threshold="itemModel.low_threshold"
                                         :high-threshold="itemModel.high_threshold"
                                         :colors="itemModel.colors"
                                         :void-color="itemModel.void_color"
                                         :disabled-void-color="itemModel.disabled_void_color"
                                         :icon-classes="itemModel.icon_classes"
                                         :void-icon-class="itemModel.void_icon_class"
                                         :disabled-void-icon-class="itemModel.disabled_void_icon_class"
                                         :show-text="itemModel.show_text"
                                         :show-score="itemModel.show_score"
                                         :text-color="itemModel.text_color"
                                         :texts="itemModel.texts"
                                         :score-template="itemModel.score_template"
                                         :disabled="itemModel.disabled"
                                         :placeholder="itemModel.placeholder"
                                         :size="viewModel.size"
                                         :class="'input-edit ' + itemModel.class"
                                         :style="'margin: 0 5px;width:100%;' + (itemModel.style || '')"
                                         @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})">
                                </el-rate>

                                <!-- 类型：time-select (忽略属性：size) -->
                                <el-time-select v-if="itemModel.type == 'time-select'"
                                                :type="itemModel.type"
                                                v-model="scope.row[itemModel.data_key]"
                                                :title="itemModel.title({value: scope.row[itemModel.data_key], itemModel : itemModel, $model : scope.row})"
                                                :name="itemModel.name"
                                                :value="itemModel.value"
                                                :default-value="itemModel.default_value"
                                                :editable="itemModel.editable"
                                                :is-range="itemModel.is_range"
                                                :arrow-control="itemModel.arrow_control"
                                                :align="itemModel.align"
                                                :popper-class="itemModel.popper_class"
                                                :picker-options="itemModel.picker_options"
                                                :range-separator="itemModel.range_separator"
                                                :value-format="itemModel.value_format"
                                                :readonly="itemModel.readonly"
                                                :disabled="itemModel.disabled"
                                                :clearable="itemModel.clearable && !itemModel.readonly && !itemModel.disabled"
                                                :start-placeholder="itemModel.start_placeholder"
                                                :end-placeholder="itemModel.end_placeholder"
                                                :placeholder="itemModel.placeholder"
                                                :size="viewModel.size"
                                                :class="'input-edit ' + itemModel.class"
                                                :style="'width:100%;' + (itemModel.style || '')"
                                                @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})"
                                                @blur="itemModel.events.blur({data_key : itemModel.data_key, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})"
                                                @focus="itemModel.events.focus({data_key : itemModel.data_key, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})">
                                </el-time-select>

                                <!-- 类型：time-picker (忽略属性：size) -->
                                <el-time-picker v-if="itemModel.type == 'time-picker'"
                                                :type="itemModel.type"
                                                v-model="scope.row[itemModel.data_key]"
                                                :title="itemModel.title({value: scope.row[itemModel.data_key], itemModel : itemModel, $model : scope.row})"
                                                :name="itemModel.name"
                                                :value="itemModel.value"
                                                :default-value="itemModel.default_value"
                                                :editable="itemModel.editable"
                                                :is-range="itemModel.is_range"
                                                :arrow-control="itemModel.arrow_control"
                                                :align="itemModel.align"
                                                :popper-class="itemModel.popper_class"
                                                :picker-options="itemModel.picker_options"
                                                :range-separator="itemModel.range_separator"
                                                :value-format="itemModel.value_format"
                                                :unlink-panels="itemModel.unlink_panels"
                                                :readonly="itemModel.readonly"
                                                :disabled="itemModel.disabled"
                                                :clearable="itemModel.clearable && !itemModel.readonly && !itemModel.disabled"
                                                :start-placeholder="itemModel.start_placeholder"
                                                :end-placeholder="itemModel.end_placeholder"
                                                :placeholder="itemModel.placeholder"
                                                :size="viewModel.size"
                                                :class="'input-edit ' + itemModel.class"
                                                :style="'width:100%;' + (itemModel.style || '')"
                                                @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})"
                                                @blur="itemModel.events.blur({data_key : itemModel.data_key, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})"
                                                @focus="itemModel.events.focus({data_key : itemModel.data_key, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})">
                                </el-time-picker>

                                <!-- 类型：date-picker (忽略属性：size) -->
                                <el-date-picker v-if="itemModel.type == 'date-picker'"
                                                :type="itemModel.date_type"
                                                v-model="scope.row[itemModel.data_key]"
                                                :title="itemModel.title({value: scope.row[itemModel.data_key], itemModel : itemModel, $model : scope.row})"
                                                :name="itemModel.name"
                                                :value="itemModel.value"
                                                :default-value="itemModel.default_value"
                                                :editable="itemModel.editable"
                                                :align="itemModel.align"
                                                :popper-class="itemModel.popper_class"
                                                :picker-options="itemModel.picker_options"
                                                :range-separator="itemModel.range_separator"
                                                :format="itemModel.format"
                                                :value-format="itemModel.value_format"
                                                :unlink-panels="itemModel.unlink_panels"
                                                :readonly="itemModel.readonly"
                                                :disabled="itemModel.disabled"
                                                :clearable="itemModel.clearable && !itemModel.readonly && !itemModel.disabled"
                                                :start-placeholder="itemModel.start_placeholder"
                                                :end-placeholder="itemModel.end_placeholder"
                                                :placeholder="itemModel.placeholder"
                                                :size="viewModel.size"
                                                :class="'input-edit ' + itemModel.class"
                                                :style="'width:100%;' + (itemModel.style || '')"
                                                @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})"
                                                @blur="itemModel.events.blur({data_key : itemModel.data_key, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})"
                                                @focus="itemModel.events.focus({data_key : itemModel.data_key, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})">

                                </el-date-picker>

                                <!-- 类型：color-picker (忽略属性：size) -->
                                <el-color-picker v-if="itemModel.type == 'color-picker'"
                                                 :type="itemModel.date_type"
                                                 v-model="scope.row[itemModel.data_key]"
                                                 :title="itemModel.title({value: scope.row[itemModel.data_key], itemModel : itemModel, $model : scope.row})"
                                                 :name="itemModel.name"
                                                 :show-alpha="itemModel.show_alpha"
                                                 :default-value="itemModel.default_value"
                                                 :color-format="itemModel.color_format"
                                                 :popper-class="itemModel.popper_class"
                                                 :readonly="itemModel.readonly"
                                                 :disabled="itemModel.disabled"
                                                 :clearable="itemModel.clearable && !itemModel.readonly && !itemModel.disabled"
                                                 :size="viewModel.size"
                                                 :class="'input-edit ' + itemModel.class"
                                                 :style="'min-width:35px;' + (itemModel.style || '')"
                                                 @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})"
                                                 @active-change="itemModel.events.activechange">
                                </el-color-picker>

                                <!-- 类型：ref (忽略属性：size form label)-->
                                <el-input v-if="itemModel.type == 'ref'"
                                          :type="itemModel.type"
                                          v-model="scope.row[itemModel.data_key]"
                                          :title="itemModel.title({value: scope.row[itemModel.data_key], itemModel : itemModel, $model : scope.row})"
                                          :name="itemModel.name"
                                          :value="itemModel.value"
                                          :minlength="itemModel.minlength"
                                          :maxlength="itemModel.maxlength"
                                          :min="itemModel.min"
                                          :max="itemModel.max"
                                          :step="itemModel.step"
                                          :prefix-icon="itemModel.prefix_icon"
                                          :suffix-icon="itemModel.suffix_icon"
                                          :auto-complete="itemModel.auto_complete"
                                          :autofocus="itemModel.autofocus"
                                          :tabindex="itemModel.tabindex"
                                          :readonly="itemModel.readonly"
                                          :disabled="itemModel.disabled"
                                          :clearable="itemModel.clearable && !itemModel.disabled"
                                          :rows="itemModel.rows"
                                          :resize="itemModel.resize"
                                          :autosize="itemModel.autosize"
                                          :placeholder="itemModel.placeholder"
                                          :size="viewModel.size"
                                          :class="'input-edit ref-input ' + itemModel.class"
                                          :style="'width:100%;' + (itemModel.style || '')"
                                          @change="itemModel.events.change({data_key : itemModel.data_key, value : $event, itemModel : itemModel, app : _self, scope : scope, $model : scope.row})">
                                    <el-button slot="append" icon="el-icon-search"
                                               @click="itemModel.events.showRefModel({itemModel : itemModel, app : _self, scope : scope, $model : scope.row})"></el-button>
                                </el-input>


                            </template>
                        </el-table-column>
                    </el-table>

                </el-collapse-item>

        </el-collapse>
        </el-card>
    </section>

    <section>
        <!-- 界面设置弹出窗口 -->


        <!-- 表型参照组件 -->
        <!-- :width="viewModel.refModels.tableRefModel.width ? (viewModel.refModels.tableRefModel.width + 'px') : null" -->
        <el-dialog :title="viewModel.refModels.tableRefModel.title"
                   :visible.sync="viewModel.refModels.tableRefModel.visible"
                   :width="(viewModel.refModels.tableRefModel.width + (viewModel.refModels.tableRefModel.show_ref_selection ? viewModel.refModels.tableRefModel.selection_width : 0)) + 'px'"
                   :fullscreen="viewModel.refModels.tableRefModel.fullscreen"
                   :top="viewModel.refModels.tableRefModel.top"
                   :modal="viewModel.refModels.tableRefModel.modal"
                   :close-on-click-modal="viewModel.refModels.tableRefModel.close_on_click_modal"
                   :show-close="viewModel.refModels.tableRefModel.show_close"
                   :highlight-current-row="true"
                   :class="'ref-dialog ' + (viewModel.refModels.tableRefModel.class || '')">

            <div v-if="viewModel.refModels.tableRefModel.enabled_search"
                 style="padding-right: 200px;margin-bottom: 5px">
                <el-input v-model="viewModel.refModels.tableRefModel.keyword"
                          :title="viewModel.refModels.tableRefModel.keyword"
                          :placeholder="viewModel.refModels.tableRefModel.search_placeholder"
                          :clearable="viewModel.refModels.tableRefModel.search_clearable && !viewModel.refModels.tableRefModel.loading"
                          :disabled="viewModel.refModels.tableRefModel.loading"
                          :size="viewModel.size"
                          @input="viewModel.refModels.tableRefModel.events.keywordChange">
                    <el-select v-model="viewModel.refModels.tableRefModel.search_key"
                               slot="prepend"
                               placeholder="请选择"
                               :size="viewModel.size"
                               :disabled="viewModel.refModels.tableRefModel.loading"
                               style="width: 70px">
                        <el-option label="全部" value=""></el-option>
                        <el-option v-for="column in viewModel.refModels.tableRefModel.refTable.columnModel"
                                   :key="genKey()"
                                   :label="column.label" :value="column.key"></el-option>
                    </el-select>
                    <el-button slot="append" icon="el-icon-search" title="搜索"
                               :disabled="viewModel.refModels.tableRefModel.loading"
                               @click="viewModel.refModels.tableRefModel.events.search"
                               style="padding: 0px 12px"></el-button>
                </el-input>
                <el-checkbox v-model="viewModel.refModels.tableRefModel.auto_search"
                             :disabled="viewModel.refModels.tableRefModel.loading"
                             class="right" style="right: -85px; margin-top: -25px">
                    自动筛选
                </el-checkbox>
                <el-button v-if="viewModel.refModels.tableRefModel.enabled_refresh"
                           type="text" icon="el-icon-refresh"
                           :loading="viewModel.refModels.tableRefModel.loading"
                           style="float: right;margin-right: -145px;margin-top: -33px;" title="刷新参照数据"
                           @click="viewModel.refModels.tableRefModel.events.refresh">
                    刷新
                </el-button>
                <el-button type="text"
                           style="float: right;margin-right: -200px;margin-top: -33px;" title="展开/收缩已选择"
                           @click="viewModel.refModels.tableRefModel.events.showRefSelection">
                   <span v-if="!viewModel.refModels.tableRefModel.show_ref_selection">
                     展开<i class="el-icon-d-arrow-right"></i>
                   </span>
                    <span v-if="viewModel.refModels.tableRefModel.show_ref_selection">
                     <i class="el-icon-d-arrow-left"></i>收缩
                   </span>

                </el-button>
            </div>

            <el-row :gutter="10" v-loading="viewModel.refModels.tableRefModel.loading"
                    :element-loading-text="viewModel.refModels.tableRefModel.element_loading_text">
                <el-col :span="24 - (viewModel.refModels.tableRefModel.show_ref_selection ? viewModel.refModels.tableRefModel.selection_colspan : 0)">
                    <!-- :style="'width:' + (viewModel.refModels.tableRefModel.refTable.width || 460) + 'px'" -->
                    <el-table ref="refTable" border
                              :data="viewModel.refModels.tableRefModel.refTable.data"
                              :highlight-current-row="viewModel.refModels.tableRefModel.refTable.highlight_current_row"
                              :height="viewModel.refModels.tableRefModel.refTable.height - (viewModel.refModels.tableRefModel.refTable.pagination.enabled ? 30 : 0)"
                              :max-height="viewModel.refModels.tableRefModel.refTable.max_height"

                              :size="viewModel.size"
                              :class="'ref-table ' + (viewModel.refModels.tableRefModel.refTable.multiple ? 'ref-table--multiple-selection' : 'ref-table--single-selection')"
                              @row-click="viewModel.refModels.tableRefModel.events.rowClick"
                              @row-dblclick="viewModel.refModels.tableRefModel.events.rowDblclick"
                              @select="viewModel.refModels.tableRefModel.events.select"
                              @select-all="viewModel.refModels.tableRefModel.events.selectAll">
                        <el-table-column type="selection"
                                         v-if="viewModel.refModels.tableRefModel.refTable.show_selection"
                                         :width="40"></el-table-column>
                        <el-table-column type="index" v-if="viewModel.refModels.tableRefModel.refTable.show_index"
                                         :width="40"></el-table-column>
                        <el-table-column v-for="column in viewModel.refModels.tableRefModel.refTable.columnModel"
                                         :key="genKey()"
                                         :show-overflow-tooltip="viewModel.refModels.tableRefModel.refTable.show_overflow_tooltip"
                                         :prop="column.data_key"
                                         :label="column.label"
                                         :min-width="column.min_width"
                                         :width="column.width"
                                         :sortable="column.sortable">
                        </el-table-column>
                    </el-table>

                    <el-pagination small
                                   v-if="viewModel.refModels.tableRefModel.refTable.pagination.enabled"
                                   :current-page="viewModel.refModels.tableRefModel.refTable.pagination.page.pageNo"
                                   :page-sizes="viewModel.refModels.tableRefModel.refTable.pagination.page_sizes"
                                   :page-size="viewModel.refModels.tableRefModel.refTable.pagination.page.pageSize"
                                   :layout="viewModel.refModels.tableRefModel.refTable.pagination.layout"
                                   :total="viewModel.refModels.tableRefModel.refTable.pagination.page.total"
                                   @size-change="viewModel.refModels.tableRefModel.events.handleSizeChange"
                                   @current-change="viewModel.refModels.tableRefModel.events.handleCurrentChange">
                    </el-pagination>

                </el-col>
                <el-col v-if="viewModel.refModels.tableRefModel.show_ref_selection"
                        :span="viewModel.refModels.tableRefModel.show_ref_selection ? viewModel.refModels.tableRefModel.selection_colspan : 0">
                    <el-table border style="width: 100%"
                              :data="viewModel.refModels.tableRefModel.selectionModel"
                              :highlight-current-row="viewModel.refModels.tableRefModel.refTable.highlight_current_row"
                              :height="viewModel.refModels.tableRefModel.refTable.height"
                              :max-height="viewModel.refModels.tableRefModel.refTable.max_height"
                              empty-text="未选择任务数据."
                              :size="viewModel.size">
                        <el-table-column type="index" v-if="viewModel.refModels.tableRefModel.refTable.show_index"
                                         :width="40"></el-table-column>
                        <el-table-column v-for="column in viewModel.refModels.tableRefModel.refTable.columnModel"
                                         :key="genKey()"
                                         :show-overflow-tooltip="viewModel.refModels.tableRefModel.refTable.show_overflow_tooltip"
                                         :prop="column.data_key"
                                         :label="column.label"
                                         :min-width="column.min_width"
                                         :width="column.width"
                                         :sortable="column.sortable">
                        </el-table-column>
                        <el-table-column :width="40" fixed="right">
                            <template slot-scope="scope">
                                <i class="el-icon-close" style="color: red; cursor:pointer" title="取消选择行" @click="viewModel.refModels.tableRefModel.events.cancelSelect(scope.row)"></i>
                            </template>
                        </el-table-column>

                    </el-table>
                </el-col>
            </el-row>

            <span slot="footer" class="dialog-footer">
                <el-button type="primary" :size="viewModel.size"
                           :disabled="viewModel.refModels.tableRefModel.loading || !viewModel.refModels.tableRefModel.selectionModel.length"
                           @click="viewModel.refModels.tableRefModel.events.confirm" title="确定">确定</el-button>
                <el-button type="warning" :size="viewModel.size" :disabled="viewModel.refModels.tableRefModel.loading"
                           @click="viewModel.refModels.tableRefModel.events.clear" title="清除选择">清除</el-button>
                <el-button :size="viewModel.size" @click="viewModel.refModels.tableRefModel.events.close" title="关闭">关闭</el-button>
            </span>
        </el-dialog>
    </section>
</div>
</body>


<!-- 引入 Vue -->
<script type="text/javascript" src="../../node_modules/vue/dist/vue.js"></script>
<!-- 引入组件库 -->
<script type="text/javascript" src="../../node_modules/element-ui/lib/index.js"></script>
<!-- 引入 axios  -->
<script type="text/javascript" src="../../node_modules/axios/dist/axios.js"></script>
<!-- 引入moment -->
<script type="text/javascript" src="../../node_modules/moment/moment.js"></script>
<!-- 引入extend -->
<script type="text/javascript" src="extend.js"></script>
<!-- 引入模板JS -->
<script type="text/javascript" src="templet.js"></script>
<!-- 引入页面JS -->
<script type="text/javascript" src="index.js"></script>
<!-- 引入drag -->
<script type="text/javascript" src="drag.js"></script>
<script>
    /** dialog 组件拖拽实现 */
    new Drag('el-dialog').enable();
</script>
</html>